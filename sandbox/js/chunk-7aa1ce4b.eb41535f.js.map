{"version":3,"sources":["webpack:///./node_modules/file-saver/dist/FileSaver.min.js","webpack:///./src/scss/dagre.css","webpack:///./src/map-export.js","webpack:///./src/components/VizJsOutput.vue?d059","webpack:///src/components/VizJsOutput.vue","webpack:///./src/components/VizJsOutput.vue?8da6","webpack:///./src/components/VizJsOutput.vue","webpack:///./src/components/VizJsOutput.vue?746d"],"names":["this","b","a","autoBom","console","warn","test","type","Blob","c","d","e","XMLHttpRequest","open","responseType","onload","response","onerror","error","send","status","dispatchEvent","MouseEvent","document","createEvent","initMouseEvent","window","f","self","global","saveAs","HTMLAnchorElement","prototype","g","h","i","URL","webkitURL","j","createElement","name","download","rel","href","origin","location","target","createObjectURL","setTimeout","revokeObjectURL","navigator","msSaveOrOpenBlob","title","body","innerText","HTMLElement","safari","userAgent","FileReader","onloadend","result","replace","readAsDataURL","k","l","module","exports","dagreCssHtml","dagreCss","getSvgString","el","width","height","scale","isDagre","source","XMLSerializer","serializeToString","match","exec","insertAt","index","length","slice","svgString2Image","svgString","callback","imgsrc","btoa","unescape","encodeURIComponent","canvas","context","getContext","image","Image","clearRect","drawImage","toBlob","blob","filesize","Math","round","src","saveAsSvg","isDagreSvg","clientWidth","clientHeight","box","getBoundingClientRect","right","left","bottom","top","FileSaver","saveAsPng","HTMLCanvasElement","Object","defineProperty","value","quality","binStr","atob","toDataURL","split","len","arr","Uint8Array","charCodeAt","render","_vm","_h","$createElement","_c","_self","staticClass","ref","staticRenderFns","basePath","methods","updateMap","$_vizJsMap","exceptions","dot","$store","getters","settings","config","vizJs","props","catch","computed","watch","mounted","workerURL","$refs","container","state","pngScale","beforeDestroy","component"],"mappings":"sGAAA,qCAAwD,EAAO,GAAE,IAAE,kEAAnE,CAA0JA,GAAK,WAAW,aAAa,SAASC,EAAEC,EAAED,GAAG,MAAM,oBAAoBA,EAAEA,EAAE,CAACE,SAAQ,GAAI,iBAAiBF,IAAIG,QAAQC,KAAK,sDAAsDJ,EAAE,CAACE,SAASF,IAAIA,EAAEE,SAAS,6EAA6EG,KAAKJ,EAAEK,MAAM,IAAIC,KAAK,CAAC,SAASN,GAAG,CAACK,KAAKL,EAAEK,OAAOL,EAAE,SAASO,EAAER,EAAEQ,EAAEC,GAAG,IAAIC,EAAE,IAAIC,eAAeD,EAAEE,KAAK,MAAMZ,GAAGU,EAAEG,aAAa,OAAOH,EAAEI,OAAO,WAAWb,EAAES,EAAEK,SAASP,EAAEC,IAAIC,EAAEM,QAAQ,WAAWb,QAAQc,MAAM,4BAA4BP,EAAEQ,OAAO,SAAST,EAAER,GAAG,IAAID,EAAE,IAAIW,eAAeX,EAAEY,KAAK,OAAOX,GAAE,GAAI,IAAID,EAAEkB,OAAO,MAAMjB,IAAI,OAAO,KAAKD,EAAEmB,QAAQ,KAAKnB,EAAEmB,OAAO,SAAST,EAAET,GAAG,IAAIA,EAAEmB,cAAc,IAAIC,WAAW,UAAU,MAAMb,GAAG,IAAIR,EAAEsB,SAASC,YAAY,eAAevB,EAAEwB,eAAe,SAAQ,GAAG,EAAGC,OAAO,EAAE,EAAE,EAAE,GAAG,IAAG,GAAG,GAAG,GAAG,EAAG,EAAE,MAAMxB,EAAEmB,cAAcpB,IAAI,IAAI0B,EAAE,iBAAiBD,QAAQA,OAAOA,SAASA,OAAOA,OAAO,iBAAiBE,MAAMA,KAAKA,OAAOA,KAAKA,KAAK,iBAAiBC,GAAQA,EAAOA,SAASA,EAAOA,OAAO,EAAO3B,EAAEyB,EAAEG,SAAS,iBAAiBJ,QAAQA,SAASC,EAAE,aAAa,aAAaI,kBAAkBC,UAAU,SAAS/B,EAAEgC,EAAEC,GAAG,IAAIC,EAAER,EAAES,KAAKT,EAAEU,UAAUC,EAAEf,SAASgB,cAAc,KAAKN,EAAEA,GAAGhC,EAAEuC,MAAM,WAAWF,EAAEG,SAASR,EAAEK,EAAEI,IAAI,WAAW,iBAAiBzC,GAAGqC,EAAEK,KAAK1C,EAAEqC,EAAEM,SAASC,SAASD,OAAOjC,EAAE2B,GAAG5B,EAAE4B,EAAEK,MAAMlC,EAAER,EAAEgC,EAAEC,GAAGvB,EAAE2B,EAAEA,EAAEQ,OAAO,YAAYR,EAAEK,KAAKR,EAAEY,gBAAgB9C,GAAG+C,YAAW,WAAWb,EAAEc,gBAAgBX,EAAEK,QAAO,KAAKK,YAAW,WAAWrC,EAAE2B,KAAI,KAAK,qBAAqBY,UAAU,SAASvB,EAAEM,EAAEC,GAAG,GAAGD,EAAEA,GAAGN,EAAEa,MAAM,WAAW,iBAAiBb,EAAEuB,UAAUC,iBAAiBlD,EAAE0B,EAAEO,GAAGD,QAAQ,GAAGvB,EAAEiB,GAAGlB,EAAEkB,EAAEM,EAAEC,OAAO,CAAC,IAAIC,EAAEZ,SAASgB,cAAc,KAAKJ,EAAEQ,KAAKhB,EAAEQ,EAAEW,OAAO,SAASE,YAAW,WAAWrC,EAAEwB,QAAO,SAASjC,EAAED,EAAES,EAAEC,GAAG,GAAGA,EAAEA,GAAGE,KAAK,GAAG,UAAUF,IAAIA,EAAEY,SAAS6B,MAAMzC,EAAEY,SAAS8B,KAAKC,UAAU,kBAAkB,iBAAiBpD,EAAE,OAAOO,EAAEP,EAAED,EAAES,GAAG,IAAIuB,EAAE,6BAA6B/B,EAAEK,KAAK2B,EAAE,eAAe5B,KAAKqB,EAAE4B,cAAc5B,EAAE6B,OAAOrB,EAAE,eAAe7B,KAAK4C,UAAUO,WAAW,IAAItB,GAAGF,GAAGC,IAAI,iBAAiBwB,WAAW,CAAC,IAAIpB,EAAE,IAAIoB,WAAWpB,EAAEqB,UAAU,WAAW,IAAIzD,EAAEoC,EAAEsB,OAAO1D,EAAEiC,EAAEjC,EAAEA,EAAE2D,QAAQ,eAAe,yBAAyBlD,EAAEA,EAAEkC,SAASF,KAAKzC,EAAE2C,SAAS3C,EAAES,EAAE,MAAM2B,EAAEwB,cAAc5D,OAAO,CAAC,IAAI6D,EAAEpC,EAAES,KAAKT,EAAEU,UAAU2B,EAAED,EAAEhB,gBAAgB7C,GAAGS,EAAEA,EAAEkC,SAASmB,EAAEnB,SAASF,KAAKqB,EAAErD,EAAE,KAAKqC,YAAW,WAAWe,EAAEd,gBAAgBe,KAAI,QAAQrC,EAAEG,OAAO5B,EAAE4B,OAAO5B,EAA+B+D,EAAOC,QAAQhE,O,gLCAj/E,inFCEXiE,EAAe,0BAA4BC,EAAW,WAsB1D,SAASC,EAAaC,EAAIC,EAAOC,EAAQC,EAAOC,GAC9C,IAAIC,GAAS,IAAIC,eAAgBC,kBAAkBP,GA+BnD,GA7BAK,EAASA,EAAOd,QAAQ,kBAAmB,gBAC3Cc,EAASA,EAAOd,QAAQ,cAAe,cAGlCc,EAAOG,MAAM,wDAChBH,EAASA,EAAOd,QAAQ,QAAS,4CAE9Bc,EAAOG,MAAM,oDAChBH,EAASA,EAAOd,QACd,QACA,oDAOJc,EAASA,EAAOd,QAAQ,eAAgB,UAAYU,EAAQE,EAAQ,OACpEE,EAASA,EAAOd,QACd,gBACA,WACEW,EAASC,EACT,oBACAF,EACA,IACAC,EACA,yCAGAE,EAAS,CAEX,IAAII,EAAQ,YAAYC,KAAKJ,GAC7B,GAAIG,EAAO,CACT,IAAIE,EAAWF,EAAMG,MAAQH,EAAM,GAAGI,OACtCP,EACEA,EAAOQ,MAAM,EAAGH,GAAYb,EAAeQ,EAAOQ,MAAMH,GAG5DL,EAASA,EAAOd,QAAQ,yBAA0B,qBAKpD,OADAc,EAAS,4CAA8CA,EAChDA,EAET,SAASS,EAAgBC,EAAWd,EAAOC,EAAQc,GACjD,IAAIC,EACF,6BACAC,KAAKC,SAASC,mBAAmBL,KAE/BM,EAASpE,SAASgB,cAAc,UAChCqD,EAAUD,EAAOE,WAAW,MAEhCF,EAAOpB,MAAQA,EACfoB,EAAOnB,OAASA,EAEhB,IAAIsB,EAAQ,IAAIC,MAChBD,EAAM/E,OAAS,WACb6E,EAAQI,UAAU,EAAG,EAAGzB,EAAOC,GAC/BoB,EAAQK,UAAUH,EAAO,EAAG,EAAGvB,EAAOC,GAEtCmB,EAAOO,QAAO,SAASC,GACrB,IAAIC,EAAWC,KAAKC,MAAMH,EAAKjB,OAAS,MAAQ,MAC5CI,GAAUA,EAASa,EAAMC,OAGjCN,EAAMS,IAAMhB,EAqCP,SAASiB,EAAUlC,EAAImC,GAC5B,IAAIlC,EAAQD,EAAGoC,YACXlC,EAASF,EAAGqC,aAChB,GAAc,IAAVpC,GAA0B,IAAXC,EAAc,CAC/B,IAAIoC,EAAMtC,EAAGuC,wBACbtC,EAAQqC,EAAIE,MAAQF,EAAIG,KACxBvC,EAASoC,EAAII,OAASJ,EAAIK,IAE5B,IAAItC,EAASN,EAAaC,EAAIC,EAAOC,EAAQ,EAAGiC,GAC5CN,EAAO,IAAI3F,KAAK,CAACmE,GAAS,CAAEpE,KAAM,gCACtC2G,IAAUpF,OAAOqE,EAAM,WAElB,SAASgB,EAAU7C,EAAIG,EAAOgC,GACnC,IAAIlC,EAAQD,EAAGoC,YACXlC,EAASF,EAAGqC,aAChB,GAAc,IAAVpC,GAA0B,IAAXC,EAAc,CAC/B,IAAIoC,EAAMtC,EAAGuC,wBACbtC,EAAQqC,EAAIE,MAAQF,EAAIG,KACxBvC,EAASoC,EAAII,OAASJ,EAAIK,IAE5B,IAAItC,EAASN,EAAaC,EAAIC,EAAOC,EAAQC,EAAOgC,GACpDlC,GAASE,EACTD,GAAUC,EACVW,EAAgBT,EAAQJ,EAAOC,GAAQ,SAAS2B,GACzCA,GAGLe,IAAUpF,OAAOqE,EAAM,cAxJtBiB,kBAAkBpF,UAAUkE,QAC/BmB,OAAOC,eAAeF,kBAAkBpF,UAAW,SAAU,CAC3DuF,MAAO,SAASjC,EAAU/E,EAAMiH,GAC9B,IAAI7B,EAAS3F,KACbgD,YAAW,WAKT,IAJA,IAAIyE,EAASC,KAAK/B,EAAOgC,UAAUpH,EAAMiH,GAASI,MAAM,KAAK,IACzDC,EAAMJ,EAAOvC,OACb4C,EAAM,IAAIC,WAAWF,GAEhB1F,EAAI,EAAGA,EAAI0F,EAAK1F,IACvB2F,EAAI3F,GAAKsF,EAAOO,WAAW7F,GAG7BmD,EAAS,IAAI9E,KAAK,CAACsH,GAAM,CAAEvH,KAAMA,GAAQ,sB,2CClBjD,IAAI0H,EAAS,WAAa,IAAIC,EAAIlI,KAASmI,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,mCAAmC,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACG,IAAI,YAAYD,YAAY,kBAC9NE,EAAkB,G,oCCYlB,EAAJ,KACI,EAAJ,KAGIC,EAAW,YAEf,GACElG,KAAM,gBACNmG,QAAS,CACPC,UAAW,WACT,GAAK5I,KAAK6I,WAAV,CAGA,IAAN,6CACM,KAAIC,GAAcA,EAAW5D,OAAS,GAAtC,CAIA,IAAN,GACQ6D,IAAK/I,KAAKgJ,OAAOC,QAAQF,IACzBG,SAAUlJ,KAAKgJ,OAAOC,QAAQE,OAAOC,OAEvCpJ,KAAK6I,WAAWZ,OAAOoB,GAAOC,OAAM,SAA1C,gCAGEC,SAAU,CACRR,IAAK,WAGH,OAFA/I,KAAK4I,YACL5I,KAAKgJ,OAAOC,QAAQE,OACbnJ,KAAKgJ,OAAOC,QAAQF,MAG/BS,MAAO,CACLT,IAAK,cAKPU,QAAS,WACP,IAAJ,uBACA,wBACIzJ,KAAK6I,WAAa,IAAI,EAA1B,oBACMa,UAAWA,IAEb1J,KAAK4I,YACL,IAAItE,EAAKtE,KAAK2J,MAAMC,UAChBZ,EAAShJ,KAAKgJ,OAClB,EAAJ,WACM,IAAIvE,EAAQuE,EAAOa,MAAMC,SACzB,OAAN,OAAM,CAAN,wCAEI,EAAJ,WACM,OAAN,OAAM,CAAN,sCAEI,EAAJ,8BACI,EAAJ,+BAEEC,cAAe,WACb,EAAJ,+BACI,EAAJ,iCCxEmX,I,wBCQ/WC,EAAY,eACd,EACA/B,EACAQ,GACA,EACA,KACA,WACA,MAIa,aAAAuB,E,2CCnBf,yBAAkoB,EAAG","file":"js/chunk-7aa1ce4b.eb41535f.js","sourcesContent":["(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","export default \"/* .dagre * {\\n  box-sizing: border-box;\\n} */\\n.dagre .cluster rect {\\n  fill: #ddd;\\n}\\n/* .dagre .cluster .node-label {\\n  font-family: Arial, sans-serif;\\n  width: auto;\\n} */\\n.dagre .cluster h3 {\\n  margin: 0;\\n  padding-top: 3px;\\n  font-size: 14px;\\n}\\n.dagre .cluster.level-0 rect {\\n  fill: #dadada;\\n}\\n.dagre .cluster.level-1 rect {\\n  fill: #bababa;\\n}\\n.dagre .cluster.level-2 rect {\\n  fill: #aaa;\\n}\\n.dagre text {\\n  font-weight: 300;\\n  font-family: Arial, sans-serf;\\n  font-size: 14px;\\n  color: #000;\\n}\\n.dagre g h3 {\\n  font-family: Arial, sans-serif;\\n  font-weight: normal;\\n  color: #000;\\n}\\n.dagre g p {\\n  font-family: Arial, sans-serif;\\n  font-weight: normal;\\n}\\n.dagre .edgePath {\\n  stroke: #333;\\n  stroke-width: 1.5px;\\n}\\n.dagre .edgePath marker path {\\n  stroke-width: 0;\\n  stroke: none;\\n}\\n.dagre .edgePath.attack {\\n  stroke: red;\\n}\\n.dagre .edgePath.attack marker {\\n  fill: red;\\n  stroke: none;\\n}\\n.dagre .edgePath.contrary {\\n  stroke: red;\\n}\\n.dagre .edgePath.contrary marker {\\n  fill: red;\\n  stroke: none;\\n}\\n.dagre .edgePath.contradictory {\\n  stroke: red;\\n}\\n.dagre .edgePath.contradictory marker {\\n  fill: red;\\n  stroke: none;\\n}\\n\\n.dagre .edgePath.support {\\n  stroke: green;\\n}\\n.dagre .edgePath.support marker {\\n  fill: green;\\n  stroke: none;\\n}\\n.dagre .edgePath.entails {\\n  stroke: green;\\n}\\n.dagre .edgePath.entails marker {\\n  fill: green;\\n  stroke: none;\\n}\\n.dagre .edgePath.undercut {\\n  stroke: purple;\\n}\\n.dagre .edgePath.undercut marker {\\n  fill: purple;\\n  stroke: none;\\n}\\n/* .dagre .node {\\n  cursor: pointer;\\n  display: block;\\n  position: static;\\n  margin: 0;\\n  white-space: normal;\\n  width: 200px;\\n  height: auto;\\n  text-align: center;\\n  color: #000;\\n} */\\n.dagre .node rect {\\n  stroke: #999;\\n  fill: #fff;\\n  stroke-width: 1.5px;\\n}\\n/* .dagre .node .node-label {\\n  white-space: normal;\\n  padding: 5px;\\n}\\n.dagre .node p {\\n  padding: 0px;\\n  margin: 0;\\n  font-weight: normal;\\n  font-size: 12px;\\n  display: block;\\n}\\n.dagre .node h3 {\\n  padding: 0px;\\n  margin: 0;\\n  font-size: 14px;\\n  font-weight: normal;\\n  color: #000;\\n  display: block;\\n} */\\n.dagre .node.group-map-node rect {\\n  stroke-width: 0px;\\n}\\n.dagre .node.argument-map-node rect {\\n  fill: cornflowerblue;\\n  stroke: black;\\n  stroke-width: 2px;\\n}\\n.dagre .node.argument-map-node text {\\n  fill: black;\\n}\\n.dagre .node.statement-map-node rect {\\n  fill: white;\\n  stroke: cornflowerblue;\\n  stroke-width: 3px;\\n}\\n.dagre .node.statement-map-node text {\\n  fill: black;\\n}\\n.dagre .node-label {\\n  text-align: center;\\n  width: 150px;\\n}\\n.dagre .node-label h3 {\\n  font-weight: normal;\\n}\\n\";","import FileSaver from \"file-saver\";\nimport dagreCss from \"!!raw-loader!./scss/dagre.css\";\nvar dagreCssHtml = '<style type=\"text/css\">' + dagreCss + \"</style>\";\n\n// Edge Blob polyfill https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob\nif (!HTMLCanvasElement.prototype.toBlob) {\n  Object.defineProperty(HTMLCanvasElement.prototype, \"toBlob\", {\n    value: function(callback, type, quality) {\n      var canvas = this;\n      setTimeout(function() {\n        var binStr = atob(canvas.toDataURL(type, quality).split(\",\")[1]);\n        var len = binStr.length;\n        var arr = new Uint8Array(len);\n\n        for (var i = 0; i < len; i++) {\n          arr[i] = binStr.charCodeAt(i);\n        }\n\n        callback(new Blob([arr], { type: type || \"image/png\" }));\n      });\n    }\n  });\n}\n\nfunction getSvgString(el, width, height, scale, isDagre) {\n  var source = new XMLSerializer().serializeToString(el);\n\n  source = source.replace(/(\\w+)?:?xlink=/g, \"xmlns:xlink=\"); // Fix root xlink without namespace\n  source = source.replace(/NS\\d+:href/g, \"xlink:href\"); // Safari NS namespace fix\n\n  // add name spaces.\n  if (!source.match(/^<svg[^>]+xmlns=\"http:\\/\\/www\\.w3\\.org\\/2000\\/svg\"/)) {\n    source = source.replace(/^<svg/, '<svg xmlns=\"http://www.w3.org/2000/svg\"');\n  }\n  if (!source.match(/^<svg[^>]+\"http:\\/\\/www\\.w3\\.org\\/1999\\/xlink\"/)) {\n    source = source.replace(\n      /^<svg/,\n      '<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\"'\n    );\n  }\n\n  // add preserverAspectRatio=\"xMinYMin meet\"\n  // add viewBox=\"0 0 500 500\"\n  // set explicit size\n  source = source.replace(/width=\"100%\"/, 'width=\"' + width * scale + 'px\"');\n  source = source.replace(\n    /height=\"100%\"/,\n    'height=\"' +\n      height * scale +\n      'px\" viewBox=\"0 0 ' +\n      width +\n      \" \" +\n      height +\n      '\" preserveAspectRatio=\"xMinYMin meet\"'\n  );\n\n  if (isDagre) {\n    // insert css\n    var match = /^<svg.*?>/.exec(source);\n    if (match) {\n      var insertAt = match.index + match[0].length;\n      source =\n        source.slice(0, insertAt) + dagreCssHtml + source.slice(insertAt);\n    }\n    // use marker refs without url\n    source = source.replace(/marker-end=\"url\\(.*?#/g, 'marker-end=\"url(#');\n  }\n\n  // add xml declaration\n  source = '<?xml version=\"1.0\" standalone=\"no\"?>\\r\\n' + source;\n  return source;\n}\nfunction svgString2Image(svgString, width, height, callback) {\n  var imgsrc =\n    \"data:image/svg+xml;base64,\" +\n    btoa(unescape(encodeURIComponent(svgString))); // Convert SVG string to data URL\n\n  var canvas = document.createElement(\"canvas\");\n  var context = canvas.getContext(\"2d\");\n\n  canvas.width = width;\n  canvas.height = height;\n\n  var image = new Image();\n  image.onload = function() {\n    context.clearRect(0, 0, width, height);\n    context.drawImage(image, 0, 0, width, height);\n\n    canvas.toBlob(function(blob) {\n      var filesize = Math.round(blob.length / 1024) + \" KB\";\n      if (callback) callback(blob, filesize);\n    });\n  };\n  image.src = imgsrc;\n}\n// function convertSvgToPng (svgEl, svgString, scale, callback) {\n//   var canvas = document.createElement('canvas') // Not shown on page\n//   var ctx = canvas.getContext('2d')\n//   var img = new Image() // Not shown on page\n//   // img.crossOrigin = 'anonymous'\n\n//   var svgWidth = svgEl.clientWidth\n//   var svgHeight = svgEl.clientHeight\n//   if (svgWidth === 0 || svgHeight === 0) {\n//     var box = svgEl.getBoundingClientRect()\n//     svgWidth = box.right - box.left\n//     svgHeight = box.bottom - box.top\n//   }\n//   console.log(svgWidth)\n//   console.log(svgHeight)\n//   img.width = svgWidth * scale\n//   img.height = svgHeight * scale\n//   img.onload = function () {\n//     ctx.drawImage(img, 0, 0, img.width, img.height)\n//     canvas.width = img.width\n//     canvas.height = img.height\n//     // var dataUrl = can.toDataURL()\n//     // domURL.revokeObjectURL(dataUrl)\n//     canvas.toBlob(function (blob) {\n//       callback(blob)\n//       // canvas.remove()\n//     })\n//   }\n//   // var domURL = self.URL || self.webkitURL || self\n//   // var svgBlob = new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' })\n//   // var dataUrl = domURL.createObjectURL(svgBlob)\n//   console.log(svgString)\n//   var dataUrl = 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svgString)\n//   img.src = dataUrl\n// }\nexport function saveAsSvg(el, isDagreSvg) {\n  var width = el.clientWidth;\n  var height = el.clientHeight;\n  if (width === 0 || height === 0) {\n    var box = el.getBoundingClientRect();\n    width = box.right - box.left;\n    height = box.bottom - box.top;\n  }\n  var source = getSvgString(el, width, height, 1, isDagreSvg);\n  var blob = new Blob([source], { type: \"image/svg+xml;charset=utf-8\" });\n  FileSaver.saveAs(blob, \"map.svg\");\n}\nexport function saveAsPng(el, scale, isDagreSvg) {\n  var width = el.clientWidth;\n  var height = el.clientHeight;\n  if (width === 0 || height === 0) {\n    var box = el.getBoundingClientRect();\n    width = box.right - box.left;\n    height = box.bottom - box.top;\n  }\n  var source = getSvgString(el, width, height, scale, isDagreSvg);\n  width *= scale;\n  height *= scale;\n  svgString2Image(source, width, height, function(blob) {\n    if (!blob) {\n      return;\n    }\n    FileSaver.saveAs(blob, \"map.png\");\n    // FileSaver.saveAs(blob, 'map.png')\n  });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"viz-js-output map-output output\"},[_c('div',{staticClass:\"content\"},[_c('div',{ref:\"container\",staticClass:\"rendered\"})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"viz-js-output map-output output\">\n    <div class=\"content\">\n      <div ref=\"container\" class=\"rendered\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { EventBus } from \"../event-bus.js\";\nimport { saveAsSvg, saveAsPng } from \"../map-export.js\";\nimport { VizJsMap } from \"@argdown/map-views\";\n\nvar saveVizAsPng = null;\nvar saveVizAsSvg = null;\n\n// eslint-disable-next-line no-undef\nvar basePath = process.env.BASE_URL || \"/\";\n\nexport default {\n  name: \"viz-js-output\",\n  methods: {\n    updateMap: function () {\n      if (!this.$_vizJsMap) {\n        return;\n      }\n      const exceptions = this.$store.getters.argdownData.exceptions;\n      if (exceptions && exceptions.length > 0) {\n        return;\n      }\n\n      const props = {\n        dot: this.$store.getters.dot,\n        settings: this.$store.getters.config.vizJs,\n      };\n      this.$_vizJsMap.render(props).catch((e) => console.log(e));\n    },\n  },\n  computed: {\n    dot: function () {\n      this.updateMap();\n      this.$store.getters.config;\n      return this.$store.getters.dot;\n    },\n  },\n  watch: {\n    dot: function () {\n      // console.log('map watcher called!')\n    },\n  },\n\n  mounted: function () {\n    const svgContainer = this.$refs.container;\n    const workerURL = basePath + \"render.browser.js\";\n    this.$_vizJsMap = new VizJsMap(svgContainer, null, {\n      workerURL: workerURL,\n    });\n    this.updateMap();\n    var el = this.$refs.container;\n    var $store = this.$store;\n    saveVizAsPng = function () {\n      var scale = $store.state.pngScale;\n      saveAsPng(el.getElementsByTagName(\"svg\")[0], scale, false);\n    };\n    saveVizAsSvg = function () {\n      saveAsSvg(el.getElementsByTagName(\"svg\")[0], false);\n    };\n    EventBus.$on(\"save-map-as-svg\", saveVizAsSvg);\n    EventBus.$on(\"save-map-as-png\", saveVizAsPng);\n  },\n  beforeDestroy: function () {\n    EventBus.$off(\"save-map-as-svg\", saveVizAsSvg);\n    EventBus.$off(\"save-map-as-png\", saveVizAsPng);\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.content {\n  flex: 1;\n  overflow: auto;\n  .rendered {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    /* Firefox bug fix styles */\n    min-width: 0;\n    min-height: 0;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./VizJsOutput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./VizJsOutput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VizJsOutput.vue?vue&type=template&id=4afaeaf9&scoped=true&\"\nimport script from \"./VizJsOutput.vue?vue&type=script&lang=js&\"\nexport * from \"./VizJsOutput.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VizJsOutput.vue?vue&type=style&index=0&id=4afaeaf9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4afaeaf9\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./VizJsOutput.vue?vue&type=style&index=0&id=4afaeaf9&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./VizJsOutput.vue?vue&type=style&index=0&id=4afaeaf9&lang=scss&scoped=true&\""],"sourceRoot":""}